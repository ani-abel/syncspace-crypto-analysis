(self.webpackChunksyncspace_crypto_analysis=self.webpackChunksyncspace_crypto_analysis||[]).push([[773],{773:(n,e,t)=>{"use strict";t.r(e),t.d(e,{AddAnalysisModule:()=>I});var o=t(1511),i=t(4770),a=t(9086),r=t(4762),c=t(2690),s=t(3695),g=t(4612),l=t(6985),d=t(9729),p=t(8420),u=t(6599),m=t(3982),f=t(6511),h=t(1572),C=t(1593);function _(n,e){if(1&n&&(h.ynx(0),h.TgZ(1,"div",21),h._UZ(2,"img",22),h.qZA(),h.BQk()),2&n){const n=h.oxw();h.xp6(2),h.Q6J("src",n.imageBase64Url,h.LSH)}}function y(n,e){1&n&&(h.TgZ(0,"p",24),h._uU(1,"Required field"),h.qZA())}function Z(n,e){if(1&n&&(h.TgZ(0,"span"),h.YNc(1,y,2,0,"p",23),h.qZA()),2&n){const n=e.ngIf;h.xp6(1),h.Q6J("ngIf",n.required)}}function O(n,e){1&n&&(h.TgZ(0,"p",24),h._uU(1,"Required field"),h.qZA())}function A(n,e){if(1&n&&(h.TgZ(0,"span"),h.YNc(1,O,2,0,"p",23),h.qZA()),2&n){const n=e.ngIf;h.xp6(1),h.Q6J("ngIf",n.required)}}function x(n,e){if(1&n&&(h.TgZ(0,"option",25),h._uU(1),h.qZA()),2&n){const n=e.$implicit;h.Q6J("value",n),h.xp6(1),h.hij(" ",n," ")}}function M(n,e){1&n&&(h.TgZ(0,"p",24),h._uU(1,"Required field"),h.qZA())}function P(n,e){if(1&n&&(h.TgZ(0,"span"),h.YNc(1,M,2,0,"p",23),h.qZA()),2&n){const n=e.ngIf;h.xp6(1),h.Q6J("ngIf",n.required)}}function b(n,e){if(1&n&&(h.TgZ(0,"div",26),h._UZ(1,"input",27),h.TgZ(2,"label",28),h._uU(3),h.qZA(),h.qZA()),2&n){const n=e.$implicit,t=e.index;h.xp6(1),h.MGl("id","radio-",t+1,""),h.Q6J("formControlName","accessibleTo")("value",n)("checked",0===t),h.xp6(1),h.MGl("for","radio-",t+1,""),h.xp6(1),h.Oqu(n)}}function q(n,e){if(1&n&&(h.TgZ(0,"option",25),h._uU(1),h.ALo(2,"uppercase"),h.qZA()),2&n){const n=e.$implicit;h.Q6J("value",n.id),h.xp6(1),h.hij(" ",h.lcZ(2,2,n.name)," ")}}function v(n,e){1&n&&(h.TgZ(0,"p",24),h._uU(1,"Required field"),h.qZA())}function T(n,e){if(1&n&&(h.TgZ(0,"span"),h.YNc(1,v,2,0,"p",23),h.qZA()),2&n){const n=e.ngIf;h.xp6(1),h.Q6J("ngIf",n.required)}}function k(n,e){if(1&n&&(h.ynx(0),h.TgZ(1,"div",5),h.TgZ(2,"label",29),h._uU(3,"Package*"),h.qZA(),h.TgZ(4,"select",30),h.YNc(5,q,3,4,"option",17),h.ALo(6,"async"),h.qZA(),h.YNc(7,T,2,1,"span",10),h.qZA(),h.BQk()),2&n){const n=h.oxw();h.xp6(4),h.Q6J("formControlName","package"),h.xp6(1),h.Q6J("ngForOf",h.lcZ(6,3,n.packagesCreatedByUser$)),h.xp6(2),h.Q6J("ngIf",n.addAnalysisForm.get("package").touched&&n.addAnalysisForm.get("package").errors)}}const w=[{path:"",component:(()=>{class n{constructor(n,e,t){this.httpRequestSrv=n,this.store=e,this.sharedSrv=t,this.subSink=new l.Y,this.accessiblityOptions=Object.values(g.rO),this.categoryOptions=Object.values(g.Gl),this.packagesCreatedByUser$=this.sharedSrv.getDataFromStore("subscriptionPackagesYouCreated","FindSubscriptionPackagesCreatedByUserInitiatedAction")}ngOnInit(){this.initForm(),this.subSink.sink=this.addAnalysisForm.get("accessibleTo").valueChanges.subscribe(n=>{n===g.rO.SpecificPackage?this.addAnalysisForm.addControl("package",new s.NI(null,s.kI.required)):this.addAnalysisForm.removeControl("package")})}initForm(){this.addAnalysisForm=new s.cw({image:new s.NI(null,s.kI.required),title:new s.NI(null,s.kI.required),content:new s.NI(null,s.kI.required),category:new s.NI(g.Gl.Crypto,s.kI.required),accessibleTo:new s.NI(g.rO.Public,s.kI.required)})}onChange(n){return(0,r.mG)(this,void 0,void 0,function*(){const[e]=yield(0,d.E4)(n);e&&(this.imageBase64Url=e,this.addAnalysisForm.patchValue({image:n.target.files.item(0)}),this.addAnalysisForm.get("image").updateValueAndValidity())})}onSubmit(){if(this.addAnalysisForm.invalid)return;const{value:{title:n,image:e,content:t,category:o,accessibleTo:i,package:a}}=this.addAnalysisForm;this.subSink.sink=this.httpRequestSrv.uploadFile(e).pipe((0,u.b)(({data:e})=>{this.store.dispatch(p.N.CreateFeedItemInitiatedAction({payload:a?{title:n,body:t,categoryTag:o,accessLevel:i,imageUrl:e,subscriptionPackageId:a}:{title:n,body:t,categoryTag:o,accessLevel:i,imageUrl:e}}))}),(0,m.zg)(n=>this.store.select(n=>n[0].successMessage))).subscribe(n=>{n&&(this.imageBase64Url=null,this.addAnalysisForm.reset())})}ngOnDestroy(){this.subSink.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(c.gS),h.Y36(C.yh),h.Y36(f.F))},n.\u0275cmp=h.Xpm({type:n,selectors:[["syncspace-crypto-analysis-add-analysis"]],decls:39,vars:12,consts:[[1,"page-container","full-width"],[1,"page-content"],[1,"form-section"],[1,"no-padding","text-danger","text-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","analysis-image"],["accept","image/*","type","file","id","analysis-image",1,"display-none",3,"change"],["fileUploadEl",""],[1,"btn","btn-danger","slim-button",3,"click"],[4,"ngIf"],["for","title"],["type","text","id","title",1,"form-control",3,"formControlName"],["for","analysis-content"],["id","analysis-content","cols","30","rows","10",1,"form-textarea",3,"formControlName"],["for","category"],["id","category",1,"form-control",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["for","visible-to"],["class","radio",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-block",3,"disabled"],[1,"image-preview","mt-20","full-width"],["alt","feed Image",3,"src"],["class","form-helper danger",4,"ngIf"],[1,"form-helper","danger"],[3,"value"],[1,"radio"],["type","radio",3,"formControlName","id","value","checked"],[1,"radio-label","cursor-pointer",3,"for"],["for","last-name"],["id","market",1,"form-control",3,"formControlName"]],template:function(n,e){if(1&n){const n=h.EpF();h.TgZ(0,"section",0),h.TgZ(1,"main",1),h.TgZ(2,"div",2),h.TgZ(3,"h2",3),h._uU(4,"Add Analysis"),h.qZA(),h.TgZ(5,"form",4),h.NdJ("ngSubmit",function(){return e.onSubmit()}),h.TgZ(6,"div",5),h.TgZ(7,"label",6),h._uU(8,"Image*"),h.qZA(),h._uU(9,"\xa0 "),h.TgZ(10,"input",7,8),h.NdJ("change",function(n){return e.onChange(n)}),h.qZA(),h.TgZ(12,"button",9),h.NdJ("click",function(){return h.CHM(n),h.MAs(11).click()}),h._uU(13," Select Image "),h.qZA(),h.YNc(14,_,3,1,"ng-container",10),h.qZA(),h.TgZ(15,"div",5),h.TgZ(16,"label",11),h._uU(17,"Title*"),h.qZA(),h._UZ(18,"input",12),h.YNc(19,Z,2,1,"span",10),h.qZA(),h.TgZ(20,"div",5),h.TgZ(21,"label",13),h._uU(22,"Content*"),h.qZA(),h._UZ(23,"textarea",14),h.YNc(24,A,2,1,"span",10),h.qZA(),h.TgZ(25,"div",5),h.TgZ(26,"label",15),h._uU(27,"Category*"),h.qZA(),h.TgZ(28,"select",16),h.YNc(29,x,2,2,"option",17),h.qZA(),h.YNc(30,P,2,1,"span",10),h.qZA(),h.TgZ(31,"div",5),h.TgZ(32,"label",18),h._uU(33,"Accessible to*"),h.qZA(),h.YNc(34,b,4,6,"div",19),h.qZA(),h.YNc(35,k,8,5,"ng-container",10),h.TgZ(36,"div",5),h.TgZ(37,"button",20),h._uU(38," Submit "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}2&n&&(h.xp6(5),h.Q6J("formGroup",e.addAnalysisForm),h.xp6(9),h.Q6J("ngIf",e.imageBase64Url),h.xp6(4),h.Q6J("formControlName","title"),h.xp6(1),h.Q6J("ngIf",e.addAnalysisForm.get("title").touched&&e.addAnalysisForm.get("title").errors),h.xp6(4),h.Q6J("formControlName","content"),h.xp6(1),h.Q6J("ngIf",e.addAnalysisForm.get("content").touched&&e.addAnalysisForm.get("content").errors),h.xp6(4),h.Q6J("formControlName","category"),h.xp6(1),h.Q6J("ngForOf",e.categoryOptions),h.xp6(1),h.Q6J("ngIf",e.addAnalysisForm.get("category").touched&&e.addAnalysisForm.get("category").errors),h.xp6(4),h.Q6J("ngForOf",e.accessiblityOptions),h.xp6(1),h.Q6J("ngIf",e.addAnalysisForm.get("package")),h.xp6(2),h.Q6J("disabled",e.addAnalysisForm.invalid))},directives:[s._Y,s.JL,s.sg,o.O5,s.Fj,s.JJ,s.u,s.EJ,o.sg,s.YN,s.Kr,s._],pipes:[o.Ov,o.gd],styles:[".page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{width:50%;margin:0 auto;padding:50px 0 80px}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{width:100%;padding:20px;background:var(--bg-secondary);box-shadow:var(--box-shadow-md)}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .page-subcaption[_ngcontent-%COMP%]{padding:10px 0}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:center;flex:1 1}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:50%;list-style:none}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{letter-spacing:1px}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:var(--font-size);font-weight:700;letter-spacing:1.5px;color:var(--primary-text-color)}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--secondary-text-color)}.page-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{height:300px}.page-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;box-shadow:var(--box-shadow-md)}.page-container[_ngcontent-%COMP%]   .slim-button[_ngcontent-%COMP%]{height:30px;--font-size:14px;font-size:var(--font-size)}@media (max-width:992px){.image-preview[_ngcontent-%COMP%]{height:200px}}@media (max-width:768px){.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{width:80%;padding:30px 0 80px}.page-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{height:200px}}@media (max-width:576px){.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{width:100%;padding:30px 0 80px}.page-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{height:150px}}"]}),n})()}];let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[a.Bz.forChild(w)],a.Bz]}),n})(),I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[o.ez,i.s9,F]]}),n})()}}]);