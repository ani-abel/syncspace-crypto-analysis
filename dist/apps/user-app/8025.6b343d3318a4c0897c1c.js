(self.webpackChunksyncspace_crypto_analysis=self.webpackChunksyncspace_crypto_analysis||[]).push([[8025],{8025:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EditAnalysisModule:()=>F});var i=n(1511),o=n(4770),a=n(9086),c=n(4762),s=n(2690),r=n(3695),g=n(4612),d=n(6985),l=n(9729),p=n(8420),u=n(6599),m=n(6511),f=n(1572),h=n(1593),y=n(883);function _(e,t){if(1&e&&(f.ynx(0),f.TgZ(1,"div",18),f._UZ(2,"img",19),f.qZA(),f.BQk()),2&e){const e=f.oxw();f.xp6(2),f.Q6J("src",e.imageBase64Url,f.LSH)}}function C(e,t){1&e&&(f.TgZ(0,"p",21),f._uU(1,"Required field"),f.qZA())}function O(e,t){if(1&e&&(f.TgZ(0,"span"),f.YNc(1,C,2,0,"p",20),f.qZA()),2&e){const e=t.ngIf;f.xp6(1),f.Q6J("ngIf",e.required)}}function b(e,t){1&e&&(f.TgZ(0,"p",21),f._uU(1,"Required field"),f.qZA())}function Z(e,t){if(1&e&&(f.TgZ(0,"span"),f.YNc(1,b,2,0,"p",20),f.qZA()),2&e){const e=t.ngIf;f.xp6(1),f.Q6J("ngIf",e.required)}}function A(e,t){if(1&e&&(f.TgZ(0,"div",22),f._UZ(1,"input",23),f.TgZ(2,"label",24),f._uU(3),f.qZA(),f.qZA()),2&e){const e=t.$implicit,n=t.index;f.xp6(1),f.MGl("id","radio-",n+1,""),f.Q6J("formControlName","accessibleTo")("value",e)("checked",0===n),f.xp6(1),f.MGl("for","radio-",n+1,""),f.xp6(1),f.Oqu(e)}}function P(e,t){1&e&&(f.TgZ(0,"p",21),f._uU(1,"Required field"),f.qZA())}function x(e,t){if(1&e&&(f.TgZ(0,"span"),f.YNc(1,P,2,0,"p",20),f.qZA()),2&e){const e=t.ngIf;f.xp6(1),f.Q6J("ngIf",e.required)}}function M(e,t){if(1&e&&(f.TgZ(0,"option",28),f._uU(1),f.ALo(2,"uppercase"),f.qZA()),2&e){const e=t.$implicit;f.Q6J("value",e.id),f.xp6(1),f.hij(" ",f.lcZ(2,2,e.name)," ")}}function v(e,t){1&e&&(f.TgZ(0,"p",21),f._uU(1,"Required field"),f.qZA())}function I(e,t){if(1&e&&(f.TgZ(0,"span"),f.YNc(1,v,2,0,"p",20),f.qZA()),2&e){const e=t.ngIf;f.xp6(1),f.Q6J("ngIf",e.required)}}function q(e,t){if(1&e&&(f.ynx(0),f.TgZ(1,"div",5),f.TgZ(2,"label",25),f._uU(3,"Package*"),f.qZA(),f.TgZ(4,"select",26),f.YNc(5,M,3,4,"option",27),f.ALo(6,"async"),f.qZA(),f.YNc(7,I,2,1,"span",10),f.qZA(),f.BQk()),2&e){const e=f.oxw();f.xp6(4),f.Q6J("formControlName","package"),f.xp6(1),f.Q6J("ngForOf",f.lcZ(6,3,e.packagesCreatedByUser$)),f.xp6(2),f.Q6J("ngIf",e.editAnalysisForm.get("package").touched&&e.editAnalysisForm.get("package").errors)}}const k=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.httpRequestSrv=e,this.store=t,this.sharedSrv=n,this.activatedRoute=i,this.subSink=new d.Y,this.accessiblityOptions=Object.values(g.rO),this.categoryOptions=Object.values(g.Gl),this.packagesCreatedByUser$=this.sharedSrv.getDataFromStore("subscriptionPackagesYouCreated","FindSubscriptionPackagesCreatedByUserInitiatedAction")}ngOnInit(){var e;this.feedId=null===(e=this.activatedRoute.snapshot.params)||void 0===e?void 0:e.feedId,this.initForm(),this.subSink.sink=this.editAnalysisForm.get("accessibleTo").valueChanges.subscribe(e=>{const t=(0,l.KM)(this.selectedFeedItem$);e===g.rO.SpecificPackage?(this.editAnalysisForm.addControl("package",new r.NI(null,r.kI.required)),(null==t?void 0:t.subscriptionPackage)&&this.editAnalysisForm.get("package").patchValue(t.subscriptionPackage.id)):this.editAnalysisForm.removeControl("package")}),this.feedId&&(this.store.dispatch(p.N.FindFeedItemByIdInitiatedAction({payload:this.feedId})),this.selectedFeedItem$=this.store.select(e=>e[0].selectedFeedItem),this.subSink.sink=this.selectedFeedItem$.subscribe(e=>{(null==e?void 0:e.id)&&(this.imageBase64Url=e.imageUrl,this.editAnalysisForm.patchValue({title:e.title,content:e.body,category:null==e?void 0:e.categoryTag,accessibleTo:e.accessLevel}))}))}onChange(e){return(0,c.mG)(this,void 0,void 0,function*(){const[t]=yield(0,l.E4)(e);t&&(this.imageBase64Url=t,this.editAnalysisForm.patchValue({image:e.target.files.item(0)}),this.editAnalysisForm.get("image").updateValueAndValidity())})}initForm(){this.editAnalysisForm=new r.cw({image:new r.NI(null),title:new r.NI(null,r.kI.required),content:new r.NI(null,r.kI.required),category:new r.NI(g.Gl.Crypto,r.kI.required),accessibleTo:new r.NI(g.rO.Public,r.kI.required)})}onSubmit(){if(this.editAnalysisForm.invalid)return;const{value:{title:e,image:t,content:n,category:i,accessibleTo:o,package:a}}=this.editAnalysisForm;t?this.subSink.sink=this.httpRequestSrv.uploadFile(t).pipe((0,u.b)(({data:t})=>{this.store.dispatch(p.N.UpdateFeedInitiatedAction({payload:a?{feedId:this.feedId,title:e,body:n,categoryTag:i,accessLevel:o,imageUrl:t,subscriptionPackageId:a}:{feedId:this.feedId,title:e,body:n,categoryTag:i,accessLevel:o,imageUrl:t}}))})).subscribe():this.store.dispatch(p.N.UpdateFeedInitiatedAction({payload:a?{feedId:this.feedId,title:e,body:n,categoryTag:i,accessLevel:o,subscriptionPackageId:a}:{feedId:this.feedId,title:e,body:n,categoryTag:i,accessLevel:o}}))}ngOnDestroy(){this.subSink.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(s.gS),f.Y36(h.yh),f.Y36(m.F),f.Y36(a.gz))},e.\u0275cmp=f.Xpm({type:e,selectors:[["syncspace-crypto-analysis-edit-analysis"]],decls:35,vars:10,consts:[[1,"page-container","full-width"],[1,"page-content"],[1,"form-section"],[1,"no-padding","text-danger","text-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","analysis-image"],["accept","image/*","type","file","id","analysis-image",1,"display-none",3,"change"],["fileUploadEl",""],[1,"btn","btn-danger","slim-button",3,"click"],[4,"ngIf"],["for","title"],["type","text","id","title",1,"form-control",3,"formControlName"],["for","analysis-content"],["id","analysis-content","cols","30","rows","10",1,"form-textarea",3,"formControlName"],["for","visible-to"],["class","radio",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-block",3,"disabled"],[1,"image-preview","mt-20","full-width"],["alt","feed Image",3,"src"],["class","form-helper danger",4,"ngIf"],[1,"form-helper","danger"],[1,"radio"],["type","radio",3,"formControlName","id","value","checked"],[1,"radio-label","cursor-pointer",3,"for"],["for","last-name"],["id","market",1,"form-control",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e){const e=f.EpF();f._UZ(0,"syncspace-crypto-analysis-theme-toggle"),f.TgZ(1,"section",0),f.TgZ(2,"main",1),f.TgZ(3,"div",2),f.TgZ(4,"h2",3),f._uU(5,"Edit Analysis"),f.qZA(),f.TgZ(6,"form",4),f.NdJ("ngSubmit",function(){return t.onSubmit()}),f.TgZ(7,"div",5),f.TgZ(8,"label",6),f._uU(9,"Image*"),f.qZA(),f._uU(10,"\xa0 "),f.TgZ(11,"input",7,8),f.NdJ("change",function(e){return t.onChange(e)}),f.qZA(),f.TgZ(13,"button",9),f.NdJ("click",function(){return f.CHM(e),f.MAs(12).click()}),f._uU(14," Select Image "),f.qZA(),f.YNc(15,_,3,1,"ng-container",10),f.qZA(),f.TgZ(16,"div",5),f.TgZ(17,"label",11),f._uU(18,"Title*"),f.qZA(),f._UZ(19,"input",12),f.YNc(20,O,2,1,"span",10),f.qZA(),f.TgZ(21,"div",5),f.TgZ(22,"label",13),f._uU(23,"Content*"),f.qZA(),f._UZ(24,"textarea",14),f.YNc(25,Z,2,1,"span",10),f.qZA(),f.TgZ(26,"div",5),f.TgZ(27,"label",15),f._uU(28,"Accessible to*"),f.qZA(),f.YNc(29,A,4,6,"div",16),f.YNc(30,x,2,1,"span",10),f.qZA(),f.YNc(31,q,8,5,"ng-container",10),f.TgZ(32,"div",5),f.TgZ(33,"button",17),f._uU(34," Submit "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(6),f.Q6J("formGroup",t.editAnalysisForm),f.xp6(9),f.Q6J("ngIf",t.imageBase64Url),f.xp6(4),f.Q6J("formControlName","title"),f.xp6(1),f.Q6J("ngIf",t.editAnalysisForm.get("title").touched&&t.editAnalysisForm.get("title").errors),f.xp6(4),f.Q6J("formControlName","content"),f.xp6(1),f.Q6J("ngIf",t.editAnalysisForm.get("content").touched&&t.editAnalysisForm.get("content").errors),f.xp6(4),f.Q6J("ngForOf",t.accessiblityOptions),f.xp6(1),f.Q6J("ngIf",t.editAnalysisForm.get("accessibleTo").touched&&t.editAnalysisForm.get("accessibleTo").errors),f.xp6(1),f.Q6J("ngIf",t.editAnalysisForm.get("package")),f.xp6(2),f.Q6J("disabled",t.editAnalysisForm.invalid))},directives:[y.Q,r._Y,r.JL,r.sg,i.O5,r.Fj,r.JJ,r.u,i.sg,r._,r.EJ,r.YN,r.Kr],pipes:[i.Ov,i.gd],styles:[".page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{width:50%;margin:0 auto;padding:50px 0 80px}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{width:100%;padding:20px;background:var(--bg-secondary);box-shadow:var(--box-shadow-md)}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .page-subcaption[_ngcontent-%COMP%]{padding:10px 0}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:center;flex:1 1}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:50%;list-style:none}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{letter-spacing:1px}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:var(--font-size);font-weight:700;letter-spacing:1.5px;color:var(--primary-text-color)}.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--secondary-text-color)}.page-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{height:300px}.page-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;box-shadow:var(--box-shadow-md)}.page-container[_ngcontent-%COMP%]   .slim-button[_ngcontent-%COMP%]{height:30px;--font-size:14px;font-size:var(--font-size)}@media (max-width:992px){.image-preview[_ngcontent-%COMP%]{height:200px}}@media (max-width:768px){.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{width:80%;padding:30px 0 80px}.page-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{height:200px}}@media (max-width:576px){.page-container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{width:100%;padding:30px 0 80px}.page-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{height:150px}}"]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[a.Bz.forChild(k)],a.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[i.ez,o.s9,T]]}),e})()}}]);